<!-- this is actually the 'edit' page -->

<div id="geolocation" >
</div>


<div class="legendary osw">
  <legend>BASIC INFORMATION</legend>
</div>


<%= form_tag({controller: "users", action: "updateSurvey"}, method: "post", :class => "form-horizontal") do %>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="checkboxes">What instruments do you play?:</label>
      <div class="col-md-4">
        <label class="checkbox-inline f1" >
            <%= check_box_tag "instrument[]", 'Guitar' %> Guitar <br><%= image_tag("instruments/guitar.png", alt: "Guitar", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1">
          <%= check_box_tag "instrument[]", 'Bass' %> Bass <br><%= image_tag("instruments/bass.png", alt: "Bass", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "instrument[]", 'Vocals' %> Vocals <br><%= image_tag("instruments/vocals.png", alt: "Vocals", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "instrument[]", 'Drums' %> Drums <br><%= image_tag("instruments/drums.png", alt: "Drums", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "instrument[]", 'Keyboard' %> Keyboard <br><%= image_tag("instruments/keyboard.png", alt: "Keyboard", class: "img-circular invert") %>
        </label>
      </div>
    </div>

  <div class="form-group legendary osw">
	  <label class="col-md-4 control-label" for="select2-button-addons-multiple-input-group-sm" >What instrument do you play?</label>
			<div class="input-group input-group-sm select2-bootstrap-prepend">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button" data-select2-open="select2-button-addons-multiple-input-group-sm">
						<span class="glyphicon glyphicon-search"></span>
					</button>
				</span>
				<div class="select2-container select2-container-multi form-control select2-dropdown-open" id="s2id_select2-button-addons-multiple-input-group-sm">
				  <ul class="select2-choices">  
				    <li class="select2-search-field">    
				      <label for="s2id_autogen15" class="select2-offscreen"></label>    
				      <input type="text" autocomplete="on" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input select2-default" id="s2id_autogen15" placeholder="" style="width: 685px;" aria-activedescendant="select2-result-label-85">  
				    </li>
				  </ul>
				</div>
				<select id="select2-button-addons-multiple-input-group-sm" class="form-control select2-multiple" multiple="" tabindex="-1" style="display: none;">
				  <optgroup label="Alaskan/Hawaiian Time Zone">
	          <option value="AK">Alaska</option>
	          <option value="HI">Hawaii</option>
          </optgroup>
          <optgroup label="Pacific Time Zone">
	          <option value="CA">California</option>
	          <option value="NV">Nevada</option>
	          <option value="OR">Oregon</option>
	          <option value="WA">Washington</option>
          </optgroup>
          <optgroup label="Mountain Time Zone">
	          <option value="AZ">Arizona</option>
	          <option value="CO">Colorado</option>
	          <option value="ID">Idaho</option>
          	<option value="MT">Montana</option><option value="NE">Nebraska</option>
          	<option value="NM">New Mexico</option>
          	<option value="ND">North Dakota</option>
          	<option value="UT">Utah</option>
          	<option value="WY">Wyoming</option>
          </optgroup>
          <optgroup label="Central Time Zone">
          	<option value="AL">Alabama</option>
          	<option value="AR">Arkansas</option>
          	<option value="IL">Illinois</option>
          	<option value="IA">Iowa</option>
          	<option value="KS">Kansas</option>
          	<option value="KY">Kentucky</option>
          	<option value="LA">Louisiana</option>
          	<option value="MN">Minnesota</option>
          	<option value="MS">Mississippi</option>
          	<option value="MO">Missouri</option>
          	<option value="OK">Oklahoma</option>
          	<option value="SD">South Dakota</option>
          	<option value="TX">Texas</option>
          	<option value="TN">Tennessee</option>
          	<option value="WI">Wisconsin</option>
          </optgroup>
          <optgroup label="Eastern Time Zone">
          	<option value="CT">Connecticut</option>
          	<option value="DE">Delaware</option>
          	<option value="FL">Florida</option>
          	<option value="GA">Georgia</option>
          	<option value="IN">Indiana</option>
          	<option value="ME">Maine</option>
          	<option value="MD">Maryland</option>
          	<option value="MA">Massachusetts</option>
          	<option value="MI">Michigan</option>
          	<option value="NH">New Hampshire</option><option value="NJ">New Jersey</option>
          	<option value="NY">New York</option>
          	<option value="NC">North Carolina</option>
          	<option value="OH">Ohio</option>
          	<option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option>
          	<option value="VT">Vermont</option><option value="VA">Virginia</option>
          	<option value="WV">West Virginia</option>
          </optgroup>

						</select>
					</div>
				</div>
  

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="checkboxes">Artists you are looking for:</label>
      <div class="col-md-4">
        <label class="checkbox-inline f1" >
            <%= check_box_tag "looking[]", 'Guitar' %> Guitar <br><%= image_tag("instruments/guitar.png", alt: "Guitar", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "looking[]", 'Bass' %> Bass <br><%= image_tag("instruments/bass.png", alt: "Bass", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "looking[]", 'Vocals' %> Vocals <br><%= image_tag("instruments/vocals.png", alt: "Vocals", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "looking[]", 'Drums' %> Drums <br><%= image_tag("instruments/drums.png", alt: "Drums", class: "img-circular invert") %>
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "looking[]", 'Keyboard' %> Keyboard <br><%= image_tag("instruments/keyboard.png", alt: "Keyboard", class: "img-circular invert") %>
        </label>
      </div>
    </div>


    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="checkboxes">Genres:</label>
      <div class="col-md-4">
        <label class="checkbox-inline f1" >
          <%= check_box_tag "genre[]", 'Rockabilly' %> Rockabilly 
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "genre[]", 'Metalcore' %> Metalcore
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "genre[]", 'Future Bass' %> Future Bass
        </label>
        <label class="checkbox-inline f1" >
          <%= check_box_tag "genre[]", 'Experimental' %> Experimental
        </label>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="checkboxes">Interest level:</label>
      <div class="col-md-4">
        <label class="f3">
          <%= radio_button_tag "interest_level", ' I just want to jam!' %> I just want to jam!
        </label>
        <label class="f3">
          <%= radio_button_tag "interest_level", 'I want to start a band!' %> I want to start a band!
        </label>

        <label class="f3">
          <%= radio_button_tag "interest_level", 'I\'m open to jamming and starting a band!' %> I'm open to both!     

        </label>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="textinput">Influence:</label>
      <div class="col-md-4">
        <%= text_field_tag :influence, nil, placeholder: "Enter your influences here! (seperated by commas)", maxlength: 200, :size => 50, :required => true %>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="textinput">Personal Media URL:</label>
      <div class="col-md-4">
        <%= text_field_tag :url, nil, placeholder: "Add a YouTube/Soundcloud link of you playing!", maxlength: 200, :size => 75, :required => false %>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="textinput">Bio:</label>
      <div class="col-md-4">
        <%= text_area_tag :bio, nil, placeholder: "Add a blurb about yourself!", :required =>true, cols: 49.8 %>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="textinput">Radius:</label>
      <div class="col-md-4">
        <%= text_field_tag :radius, nil, placeholder: "Between 10 to 100 miles", maxlength: 3, :size => 50, :required =>true%>
      </div>
    </div>

    <div class="form-group legendary osw">
      <label class="col-md-4 control-label" for="textinput"></label>
      <div class="col-md-4">
        <%= submit_tag "Continue" %>
      </div>
    </div>

<% end %>

</div>
  
<script type="text/javascript">
  $(".basic-multiple").select2();
</script>

  
  <script>
			var placeholder = "Select a State";

			$( ".select2, .select2-multiple" ).select2( { placeholder: placeholder } );
			$( ".select2-allow-clear" ).select2( { allowClear: true, placeholder: placeholder } );

			// @see https://github.com/ivaynberg/select2/commit/6661e3
			function repoFormatResult( repo ) {
				var markup = "<div class='select2-result-repository clearfix'>" +
					"<div class='select2-result-repository__avatar'><img src='" + repo.owner.avatar_url + "' /></div>" +
					"<div class='select2-result-repository__meta'>" +
						"<div class='select2-result-repository__title'>" + repo.full_name + "</div>";

				if ( repo.description ) {
					markup += "<div class='select2-result-repository__description'>" + repo.description + "</div>";
				}

				markup += "<div class='select2-result-repository__statistics'>" + 
							"<div class='select2-result-repository__forks'><span class='glyphicon glyphicon-flash'></span> " + repo.forks_count + " Forks</div>" +
							"<div class='select2-result-repository__stargazers'><span class='glyphicon glyphicon-star'></span> " + repo.stargazers_count + " Stars</div>" +
							"<div class='select2-result-repository__watchers'><span class='glyphicon glyphicon-eye-open'></span> " + repo.watchers_count + " Watchers</div>" +
						"</div>" +
					"</div></div>";

				return markup;
			}

			function repoFormatSelection( repo ) {
				return repo.full_name;
			}

			$( ".select2-remote" ).select2({
				placeholder: "Search for a GitHub Repository",
				minimumInputLength: 1,
				// instead of writing the function to execute the request we use Select2's convenient helper
				ajax: {
					url: "https://api.github.com/search/repositories",
					dataType: "json",
					quietMillis: 250,
					data: function( term, page ) {
						return {
							// search term
							q: term
						};
					},
					results: function( data, page ) {
							// parse the results into the format expected by Select2.
							// since we are using custom formatting functions we do not need to alter the remote JSON data
							return { results: data.items };
					},
					cache: true
				},
				initSelection: function( element, callback ) {
					// the input tag has a value attribute preloaded that points to a preselected repository's id
					// this function resolves that id attribute to an object that select2 can render
					// using its formatResult renderer - that way the repository name is shown preselected
					var id = $( element ).val();

					if ( id !== "" ) {
						$.ajax( "https://api.github.com/repositories/" + id, {
							dataType: "json"
						}).done( function( data ) {
							callback( data );
						});
					}
				},
				formatResult: repoFormatResult,
				formatSelection: repoFormatSelection,
				// apply css that makes the dropdown taller
				dropdownCssClass: "bigdrop",
				// we do not want to escape markup since we are displaying html in results
				escapeMarkup: function( m ) {
					return m;
				}
			});

			$( "button[data-select2-open]" ).click( function() {
				$( "#" + $( this ).data( "select2-open" ) ).select2( "open" );
			});

			
				var select2OpenEventName = "select2-open";

				$( ":checkbox" ).on( "click", function() {
					$( this ).parent().nextAll( "select" ).select2( "enable", this.checked );
				});
			

			$( ".select2, .select2-multiple, .select2-allow-clear, .select2-remote" ).on( select2OpenEventName, function() {
				if ( $( this ).parents( "[class*='has-']" ).length ) {
					var classNames = $( this ).parents( "[class*='has-']" )[ 0 ].className.split( /\s+/ );

					for ( var i = 0; i < classNames.length; ++i ) {
						if ( classNames[ i ].match( "has-" ) ) {
							$( "#select2-drop" ).addClass( classNames[ i ] );
						}
					}
				}
			});

		</script>
		
		<span role="status" aria-live="polite" class="select2-hidden-accessible">50 results are available, use up and down arrow keys to navigate.</span>
		
		<div class="select2-sizer" style="position: absolute; left: -10000px; top: -10000px; display: none; font-size: 12px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-weight: normal; letter-spacing: normal; text-transform: none; white-space: nowrap;"></div>
		
		<div class="select2-drop select2-display-none bigdrop select2-with-searchbox select2-drop-active" style="left: 143.5px; width: 670px; top: 2076px; bottom: auto; display: none;">   <div class="select2-search">       <label for="s2id_autogen23_search" class="select2-offscreen">Select2 custom data load</label>       <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input" role="combobox" aria-expanded="true" aria-autocomplete="list" aria-owns="select2-results-23" id="s2id_autogen23_search" placeholder="">   </div>   <ul class="select2-results" role="listbox" id="select2-results-23"></ul></div>
		
		<div class="select2-drop select2-drop-multi select2-display-none select2-drop-active" style="left: 144.5px; width: 669px; top: 2473px; bottom: auto; display: none;">   <ul class="select2-results"></ul></div>
		
		<div class="select2-drop select2-drop-multi select2-display-none select2-drop-active has-warning" style="left: 132.5px; width: 681px; top: 2290px; bottom: auto; display: none;">   <ul class="select2-results"></ul></div>
		
		<div id="select2-drop-mask" class="select2-drop-mask" style="display: none;"></div>
		
		<div class="select2-drop select2-drop-multi select2-display-none select2-drop-active" style="left: 126.5px; width: 687px; top: 2131px; bottom: auto; display: none;">   <ul class="select2-results"></ul></div>
		
		